---
import Background from '../components/Background.astro';
import Contact from '../components/Contact.astro';
import Experiences from '../components/Experiences.astro';
import Footer from '../components/Footer.astro';
import Header from '../components/Header.astro';
import Home from '../components/Home.astro';
import Projects from '../components/Projects.astro';

// src/pages/index.astro
---

<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Tom√°s Vargas</title>
		<script>
			tailwind.config = {
				theme: {
					extend: {
						animation: {
							'pulse-slow':
								'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
						},
					},
				},
			};
		</script>
	</head>
	<body
		class="bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 text-white"
	>
		<Background />
		<Header />
		<Home />
		<Projects />
		<Experiences />
		<Contact />

		<Footer />

		<script>
			// Smooth scrolling for navigation links
			document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
				anchor.addEventListener('click', function (e) {
					e.preventDefault();
					const target = document.querySelector(
						this.getAttribute('href'),
					);
					if (target) {
						target.scrollIntoView({
							behavior: 'smooth',
							block: 'start',
						});
					}
				});
			});

			// Update active navigation link on scroll
			window.addEventListener('scroll', () => {
				const sections = document.querySelectorAll('section[id]');
				const navLinks = document.querySelectorAll('.nav-link');

				let current = '';
				sections.forEach((section) => {
					const sectionTop = section.offsetTop;
					const sectionHeight = section.clientHeight;
					if (scrollY >= sectionTop - 200) {
						current = section.getAttribute('id');
					}
				});

				navLinks.forEach((link) => {
					link.classList.remove('text-purple-400');
					link.classList.add('text-gray-300');
					if (link.getAttribute('href') === `#${current}`) {
						link.classList.remove('text-gray-300');
						link.classList.add('text-purple-400');
					}
				});
			});
		</script>
	</body>
</html>
